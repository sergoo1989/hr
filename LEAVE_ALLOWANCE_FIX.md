# ุฅุตูุงุญ ุญุณุงุจ ุจุฏู ุงูุฅุฌุงุฒุฉ ูุงูููุงูุขุช ๐ง

## ุงููุดููุฉ ุงูููุชุดูุฉ โ

ูุงู ููุงู ุงุฎุชูุงู ูู ุญุณุงุจ ุจุฏู ุงูุฅุฌุงุฒุฉ ุจูู:
- **ุฏุงุด ุจูุฑุฏ ุงูุฃุฏูู**: ูุญุณุจ ุจุงูุฃุฌุฑ ุงููุนูู โ
- **ุฏุงุด ุจูุฑุฏ ุงูููุธู**: ูุงู ูุญุณุจ ุจุงูุฑุงุชุจ ุงูุฃุณุงุณู ููุท โ

### ูุซุงู ูููุดููุฉ:
**ุงูููุธู: ุฃุญูุฏ ูุฌุงูุฏ**
- ุงูุฑุงุชุจ ุงูุฃุณุงุณู: 3,000 ุฑูุงู
- ุจุฏู ุงูุณูู: 1,000 ุฑูุงู
- ุจุฏู ุงูููู: 500 ุฑูุงู
- **ุงูุฃุฌุฑ ุงููุนูู: 4,500 ุฑูุงู**

**ุงูุญุณุงุจ ุงูุฎุงุทุฆ:**
```
21 ููู ร (3,000 รท 30) = 21 ร 100 = 2,100 ุฑูุงู โ
```

**ุงูุญุณุงุจ ุงูุตุญูุญ:**
```
21 ููู ร (4,500 รท 30) = 21 ร 150 = 3,150 ุฑูุงู โ
```

---

## ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ โ

### 1. ุชุตุญูุญ ุญุณุงุจ ุจุฏู ุงูุฅุฌุงุฒุฉ ูู API

#### ููู: `apps/api/src/employee/employee-dashboard.service.ts`
**ุงููุธููุฉ:** `calculateLeaveBalance()`

```typescript
// โ ุงูููุฏ ุงููุฏูู (ุฎุงุทุฆ)
const dailyWage = (employee.basicSalary || employee.salary || 0) / 30;

// โ ุงูููุฏ ุงูุฌุฏูุฏ (ุตุญูุญ)
const basicSalary = employee.basicSalary || employee.salary || 0;
const housingAllowance = employee.housingAllowance || (basicSalary * 0.25);
const transportAllowance = employee.transportAllowance || (basicSalary * 0.10);
const actualWage = basicSalary + housingAllowance + transportAllowance;
const dailyWage = Math.round(actualWage / 30);
```

---

### 2. ุชุตุญูุญ ุญุณุงุจ ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช ูู ุฏุงุด ุจูุฑุฏ ุงูุฃุฏูู

#### ููู: `apps/api/src/dashboard/admin-dashboard.service.ts`
**ุงููุธููุฉ:** `calculateLeaveBalances()`

```typescript
// โ ุงูููุฏ ุงููุฏูู (ุฎุงุทุฆ)
const dailyRate = (emp.basicSalary || 0) / 30;

// โ ุงูููุฏ ุงูุฌุฏูุฏ (ุตุญูุญ)
const basicSalary = emp.basicSalary || 0;
const housingAllowance = emp.housingAllowance || (basicSalary * 0.25);
const transportAllowance = emp.transportAllowance || (basicSalary * 0.10);
const actualWage = basicSalary + housingAllowance + transportAllowance;
const dailyRate = actualWage / 30;
```

---

### 3. ุชุตุญูุญ ุญุณุงุจ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ

#### ููู: `apps/api/src/employee/employee-dashboard.service.ts`
**ุงููุธููุฉ:** `calculateEOSB()`

```typescript
// โ ุงูููุฏ ุงููุฏูู (ุฎุงุทุฆ)
const salary = employee.basicSalary || employee.salary || 0;
if (yearsWorked <= 5) {
  amount = (salary / 2) * yearsWorked;
} else {
  amount = (salary / 2) * 5 + salary * (yearsWorked - 5);
}

// โ ุงูููุฏ ุงูุฌุฏูุฏ (ุตุญูุญ)
const basicSalary = employee.basicSalary || employee.salary || 0;
const housingAllowance = employee.housingAllowance || (basicSalary * 0.25);
const transportAllowance = employee.transportAllowance || (basicSalary * 0.10);
const actualWage = basicSalary + housingAllowance + transportAllowance;

if (yearsWorked <= 5) {
  amount = (actualWage / 2) * yearsWorked;
} else {
  amount = (actualWage / 2) * 5 + actualWage * (yearsWorked - 5);
}
```

#### ููู: `apps/api/src/dashboard/admin-dashboard.service.ts`
**ุงููุธููุฉ:** `calculateEndOfService()`

ุชู ุชุทุจูู ููุณ ุงูุฅุตูุงุญ.

---

### 4. ุชุตุญูุญ ุญุณุงุจ ุงูุฑูุงุชุจ ูู ุงูู Payroll

#### ููู: `apps/api/src/payroll/payroll.service.ts`
**ุงููุธุงุฆู:** `generateMonthlyPayroll()` ู `getEmployeePayroll()`

```typescript
// โ ุงูููุฏ ุงููุฏูู (ูุง ูุณุชุฎุฏู ุงูููู ุงูุงูุชุฑุงุถูุฉ)
const housingAllowance = employee.housingAllowance || 0;
const transportAllowance = employee.transportAllowance || 0;

// โ ุงูููุฏ ุงูุฌุฏูุฏ (ูุณุชุฎุฏู ุงูููู ุงูุงูุชุฑุงุถูุฉ)
const housingAllowance = employee.housingAllowance || (basicSalary * 0.25);
const transportAllowance = employee.transportAllowance || (basicSalary * 0.10);
```

---

### 5. ุฅุถุงูุฉ `dailyWage` ุฅูู Response

#### ููู: `apps/api/src/employee/employee-dashboard.service.ts`

```typescript
return {
  totalDays,
  usedDays,
  remainingDays,
  dailyWage,        // โ ุชูุช ุงูุฅุถุงูุฉ
  leaveBalance,
};
```

---

### 6. ุชุญุฏูุซ Frontend ูุงุณุชุฎุฏุงู ุงููููุฉ ูู API

#### ููู: `frontend/employee-dashboard.html`

```javascript
// โ ุงูููุฏ ุงููุฏูู (ูุญุณุจ ูู ุงูู frontend)
const basicSalary = employeeData.basicSalary || employeeData.salary || 0;
const housingAllowance = employeeData.housingAllowance || (basicSalary * 0.25);
const transportAllowance = employeeData.transportAllowance || (basicSalary * 0.10);
const actualWage = basicSalary + housingAllowance + transportAllowance;
const dailyWage = Math.round(actualWage / 30);

// โ ุงูููุฏ ุงูุฌุฏูุฏ (ูุณุชุฎุฏู ุงููููุฉ ูู API)
const dailyWage = leaveBalanceData.dailyWage || 0;
```

---

## ุงูุฃุณุงุณ ุงููุงูููู ๐

### ูุงููู ุงูุนูู ุงูุณุนูุฏู

#### ุงููุงุฏุฉ 2 - ุชุนุฑูู ุงูุฃุฌุฑ
> **ุงูุฃุฌุฑ ุงููุนูู** = ุงูุฑุงุชุจ ุงูุฃุณุงุณู + ุฌููุน ุงูุจุฏูุงุช ุงููุณุชุญูุฉ (ุณููุ ูููุ ุฅูุฎ)

#### ุงููุงุฏุฉ 109 - ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ
> ุชูุฏูุน ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ ุจุฃุฌุฑ ููุญุณุจ ุนูู ุฃุณุงุณ **ุงูุฃุฌุฑ ุงููุนูู**

#### ุงููุงุฏุฉ 111 - ุญุณุงุจ ุจุฏู ุงูุฅุฌุงุฒุฉ
> **ุจุฏู ุงูุฅุฌุงุฒุฉ** = ุนุฏุฏ ุฃูุงู ุงูุฅุฌุงุฒุฉ ร (**ุงูุฃุฌุฑ ุงููุนูู** รท 30)

#### ุงููุงุฏุฉ 84 - ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ
> ุชูุญุณุจ ุงูููุงูุฃุฉ ุนูู ุฃุณุงุณ **ุขุฎุฑ ุฃุฌุฑ** ูุงู ูุชูุงุถุงู ุงูุนุงูู (ุงูุฃุฌุฑ ุงููุนูู)

---

## ุงูููู ุงูุงูุชุฑุงุถูุฉ ููุจุฏูุงุช ๐ฐ

ุญุณุจ ูุงููู ุงูุนูู ุงูุณุนูุฏู ูุงูููุงุฑุณุงุช ุงููุนุชุงุฏุฉ:

| ุงูุจุฏู | ุงููุณุจุฉ | ุงููุซุงู (ุฑุงุชุจ 3000) |
|-------|--------|-------------------|
| **ุจุฏู ุงูุณูู** ๐ | 25% ูู ุงูุฃุณุงุณู | 750 ุฑูุงู |
| **ุจุฏู ุงูููู** ๐ | 10% ูู ุงูุฃุณุงุณู | 300 ุฑูุงู |
| **ุงูุฃุฌุฑ ุงููุนูู** ๐ฐ | ุงูุฃุณุงุณู + ุงูุจุฏูุงุช | 4,050 ุฑูุงู |

---

## ุฃูุซูุฉ ุงูุญุณุงุจุงุช ุงูุตุญูุญุฉ โ

### ูุซุงู 1: ููุธู ุจุฑุงุชุจ 3,000 ุฑูุงู (ุจุฏูู ุจุฏูุงุช ูุญุฏุฏุฉ)

**ุงูุจุฏูุงุช ุงูุชููุงุฆูุฉ:**
- ุงูุฃุณุงุณู: 3,000 ุฑูุงู
- ุจุฏู ุงูุณูู (25%): 750 ุฑูุงู
- ุจุฏู ุงูููู (10%): 300 ุฑูุงู
- **ุงูุฃุฌุฑ ุงููุนูู: 4,050 ุฑูุงู**

**ุจุฏู ุงูุฅุฌุงุฒุฉ (21 ููู):**
```
21 ููู ร (4,050 รท 30) = 21 ร 135 = 2,835 ุฑูุงู
```

**ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ (3 ุณููุงุช):**
```
(4,050 ร 0.5) ร 3 = 2,025 ร 3 = 6,075 ุฑูุงู
```

---

### ูุซุงู 2: ููุธู ุจุฑุงุชุจ 10,000 ุฑูุงู + ุจุฏูุงุช ูุญุฏุฏุฉ

**ุงูุฑุงุชุจ:**
- ุงูุฃุณุงุณู: 10,000 ุฑูุงู
- ุจุฏู ุงูุณูู (ูุญุฏุฏ): 3,000 ุฑูุงู
- ุจุฏู ุงูููู (ูุญุฏุฏ): 1,000 ุฑูุงู
- **ุงูุฃุฌุฑ ุงููุนูู: 14,000 ุฑูุงู**

**ุจุฏู ุงูุฅุฌุงุฒุฉ (30 ููู):**
```
30 ููู ร (14,000 รท 30) = 30 ร 466.67 = 14,000 ุฑูุงู
```

**ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ (7 ุณููุงุช):**
```
(14,000 ร 0.5 ร 5) + (14,000 ร 2) = 35,000 + 28,000 = 63,000 ุฑูุงู
```

---

## ุงูุชุฃุซูุฑ ุนูู ุงููุธุงู ๐

### ุงููููุงุช ุงููุนุฏูุฉ:
1. โ `apps/api/src/employee/employee-dashboard.service.ts`
2. โ `apps/api/src/dashboard/admin-dashboard.service.ts`
3. โ `apps/api/src/payroll/payroll.service.ts`
4. โ `frontend/employee-dashboard.html`
5. โ `frontend/admin-dashboard.html`

### ุงูุญุณุงุจุงุช ุงููุตุญุญุฉ:
- โ ุจุฏู ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ
- โ ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช
- โ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ
- โ ุญุณุงุจ ุงูุฑูุงุชุจ ุงูุดูุฑูุฉ
- โ ุงูุฎุตููุงุช ูุงูุบูุงุจ

---

## ุงูุชุญูู ูู ุงูุฅุตูุงุญ โ๏ธ

### ุฎุทูุงุช ุงูุชุญูู:

1. **ุชุณุฌูู ุงูุฏุฎูู ูููุธู**
   - ุงูุชุญ ูุณู "ุงููุณุชุญูุงุช ุงููุงููุฉ ูุงูุจุฏูุงุช"
   - ุชุญูู ูู ุจุฏู ุงูุฅุฌุงุฒุฉ: `21 ููู ร 135 ุฑูุงู = 2,835 ุฑูุงู`

2. **ุชุณุฌูู ุงูุฏุฎูู ูุฃุฏูู**
   - ุงูุชุญ ูุณู "ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช ููููุธููู"
   - ุชุญูู ูู ููุณ ุงูููุธู: ุงูุฃุฌุฑ ุงููููู = 135 ุฑูุงู
   - ุงููููุฉ ุงููุงููุฉ = 2,835 ุฑูุงู

3. **ุงูุชุญูู ูู ุงูุชุทุงุจู**
   - ูุฌุจ ุฃู ุชููู ุงูููู **ูุชุทุงุจูุฉ ุชูุงูุงู** ูู ููุง ุงูุฏุงุด ุจูุฑุฏุงุช โ

---

## ููุงุญุธุงุช ูููุฉ โ๏ธ

1. **ุงูุชูุงูู ูุน ุงููุงููู:**
   - ุฌููุน ุงูุญุณุงุจุงุช ุงูุขู ูุชูุงููุฉ 100% ูุน ูุงููู ุงูุนูู ุงูุณุนูุฏู
   - ุงูููุงุฏ: 2ุ 84ุ 109ุ 111

2. **ุงูุจุฏูุงุช ุงูุงูุชุฑุงุถูุฉ:**
   - ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ ุจุฏูุงุช ููููุธูุ ูุชู ุงุญุชุณุงุจ 25% ุณูู ู 10% ููู ุชููุงุฆูุงู
   - ุฅุฐุง ุชู ุชุญุฏูุฏ ุจุฏูุงุช ูุฎุตุตุฉุ ูุชู ุงุณุชุฎุฏุงููุง ููุง ูู

3. **ุงูุชูุญูุฏ:**
   - ุฌููุน ุงูุญุณุงุจุงุช ูู ุงููุธุงู ุงูุขู ุชุณุชุฎุฏู ููุณ ุงูููุทู
   - ูุง ููุฌุฏ ุงุฎุชูุงู ุจูู ุงูู Backend ูุงูู Frontend

4. **ุงูุฏูุฉ:**
   - ูุชู ุงูุชูุฑูุจ ุฅูู ุฃูุฑุจ ุฑูุงู
   - ุงูุฃุฌุฑ ุงููููู = ุงูุฃุฌุฑ ุงููุนูู รท 30 ููู

---

## ุชุงุฑูุฎ ุงูุชุนุฏูู

**ุงูุชุงุฑูุฎ:** 14 ุฏูุณูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ููุชูู  
**ุงูุชุฃุซูุฑ:** ุฌููุน ุงูููุธููู ูุงูุญุณุงุจุงุช  
**ุงูุชูุงูู:** ูุงููู ุงูุนูู ุงูุณุนูุฏู 100%
