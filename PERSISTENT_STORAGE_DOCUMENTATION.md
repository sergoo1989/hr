# ูุธุงู ุงูุชุฎุฒูู ุงูุฏุงุฆู - Persistent Storage System

## ๐ฏ ุงููุดููุฉ ุงูุชู ุชู ุญููุง

**ุงููุดููุฉ ุงูุฃุตููุฉ:**
- ุนูุฏ ุชุนุฏูู ุจูุงูุงุช ุงูููุธูุ ูุง ูุชู ุญูุธ ุงูุชุนุฏููุงุช
- ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ุฃู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑุ ุชุฎุชูู ุฌููุน ุงูุชุนุฏููุงุช
- ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุช In-Memory ููุท (ูู ุงูุฐุงูุฑุฉ)

**ุงูุญู:**
ุชู ุฅุถุงูุฉ ูุธุงู ุชุฎุฒูู ุฏุงุฆู (Persistent Storage) ุจุงุณุชุฎุฏุงู ููู JSON ูุญูุธ ุฌููุน ุงูุจูุงูุงุช ุชููุงุฆูุงู.

---

## โ ูุง ุชู ุฅุถุงูุชู

### 1. ูุธุงู ุงูุชุฎุฒูู ุงูุฏุงุฆู (`data-storage.ts`)

**ุงูููู:** `apps/api/src/database/data-storage.ts`

**ุงููุธุงุฆู:**
- `saveData(data)` - ุญูุธ ุงูุจูุงูุงุช ุฅูู ููู JSON
- `loadData()` - ุชุญููู ุงูุจูุงูุงุช ูู ุงูููู
- `hasData()` - ุงูุชุญูู ูู ูุฌูุฏ ููู ุจูุงูุงุช
- `clearData()` - ุญุฐู ููู ุงูุจูุงูุงุช (ููุงุฎุชุจุงุฑ)

**ูููุน ุงูููู:**
```
apps/api/data/hr-database.json
```

### 2. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช (`in-memory-db.ts`)

**ุงูุชุญุฏูุซุงุช ุงูุฑุฆูุณูุฉ:**

โ **ุชุญููู ุชููุงุฆู ุนูุฏ ุจุฏุก ุงูุชุดุบูู:**
```typescript
private loadFromStorage(): void {
  const data = this.storage.loadData();
  if (data) {
    // ุชุญููู ุฌููุน ุงูุจูุงูุงุช ูุงูู Counters
  }
}
```

โ **ุญูุธ ุชููุงุฆู ุจุนุฏ ูู ุนูููุฉ:**
```typescript
public saveToStorage(): void {
  // ุญูุธ ุฌููุน ุงูุจูุงูุงุช ุฅูู ุงูููู
  this.storage.saveData(data);
}
```

**ุงูุนูููุงุช ุงูุชู ุชุญูุธ ุงูุจูุงูุงุช ุชููุงุฆูุงู:**
1. โ `createEmployee()` - ุฅุถุงูุฉ ููุธู
2. โ `updateEmployee()` - ุชุญุฏูุซ ููุธู
3. โ `deleteEmployee()` - ุญุฐู ููุธู (ูู employee.service.ts)
4. โ `createUser()` - ุฅุถุงูุฉ ูุณุชุฎุฏู
5. โ `createLeave()` - ุฅุถุงูุฉ ุฅุฌุงุฒุฉ
6. โ `updateLeaveStatus()` - ุชุญุฏูุซ ุญุงูุฉ ุฅุฌุงุฒุฉ
7. โ `createAdvance()` - ุฅุถุงูุฉ ุณููุฉ
8. โ `updateAdvanceStatus()` - ุชุญุฏูุซ ุญุงูุฉ ุณููุฉ
9. โ `createAsset()` - ุฅุถุงูุฉ ุฃุตู
10. โ `createDepartment()` - ุฅุถุงูุฉ ูุณู
11. โ `deleteDepartment()` - ุญุฐู ูุณู
12. โ `createJobTitle()` - ุฅุถุงูุฉ ูุณูู ูุธููู
13. โ `deleteJobTitle()` - ุญุฐู ูุณูู ูุธููู
14. โ `updateCompanySettings()` - ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ
15. โ `seedInitialData()` - ุญูุธ ุงูุจูุงูุงุช ุงูุฃูููุฉ

### 3. ุชุญุฏูุซ `employee.service.ts`

**ุชุญุฏูุซ ุฏุงูุฉ updateEmployee:**
- ุงูุขู ุชุญูุธ **ุฌููุน ุงูุญููู** ุจูุง ูููุง ุงูุญููู ุงูุฌุฏูุฏุฉ
- ุชุญูุธ ุญููู ุงูููุธููู ุงูุฃุฌุงูุจ
- ุชุญูุธ ููุน ุงูุนููุ ุงูููุงูุฉุ ุงูุชุฐุงูุฑ

**ุชุญุฏูุซ ุฏุงูุฉ deleteEmployee:**
- ุชุญูุธ ุงูุจูุงูุงุช ุจุนุฏ ุงูุญุฐู ูุจุงุดุฑุฉ

---

## ๐ ููู ูุนูู ุงููุธุงู

### ุนูุฏ ุจุฏุก ุงูุชุดุบูู:

1. ูุชู ุฅูุดุงุก ูุฌูุฏ `data` ุฅุฐุง ูู ููู ููุฌูุฏุงู
2. ูุชู ูุญุงููุฉ ุชุญููู ุงูุจูุงูุงุช ูู `hr-database.json`
3. ุฅุฐุง ููุฌุฏ ุงูููู:
   - ูุชู ุชุญููู ุฌููุน ุงูุจูุงูุงุช
   - ูุชู ุงุณุชุนุงุฏุฉ ุงูู Counters (ID ุงูุชููุงุฆู)
   - ูุชู ุนุฑุถ: `โ ุชู ุชุญููู ุงูุจูุงูุงุช ุงููุญููุธุฉ`
4. ุฅุฐุง ูู ููุฌุฏ ุงูููู:
   - ูุชู ุชุญููู ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ
   - ูุชู ุญูุธูุง ูู ุงูููู

### ุนูุฏ ุฃู ุชุนุฏูู:

```
1. ุงููุณุชุฎุฏู ูุนุฏูู ุงูุจูุงูุงุช (Frontend)
      โ
2. ููุฑุณู ุงูุทูุจ ุฅูู API (Backend)
      โ
3. ุชูุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ (In-Memory)
      โ
4. ููุณุชุฏุนู saveToStorage() ุชููุงุฆูุงู ๐พ
      โ
5. ุชูุญูุธ ุงูุจูุงูุงุช ูู hr-database.json
      โ
6. โ ุงูุชุนุฏููุงุช ูุญููุธุฉ ุจุดูู ุฏุงุฆู!
```

---

## ๐ ูููู ููู hr-database.json

```json
{
  "users": [...],
  "employees": [...],
  "leaves": [...],
  "advances": [...],
  "assets": [...],
  "departments": [...],
  "jobTitles": [...],
  "companySettings": {...},
  "userIdCounter": 3,
  "employeeIdCounter": 3,
  "leaveIdCounter": 3,
  "advanceIdCounter": 3,
  "assetIdCounter": 2,
  "departmentIdCounter": 7,
  "jobTitleIdCounter": 8
}
```

---

## ๐ฏ ุงูุณููุงุฑูููุงุช ุงููุฎุชุจุฑุฉ

### โ ุณููุงุฑูู 1: ุชุนุฏูู ููุธู

1. ุงูุชุญ ููุญุฉ ุงูุฅุฏุงุฑุฉ
2. ุงุถุบุท ุนูู "ุชุนุฏูู" ูููุธู
3. ุบููุฑ ุงูุงุณู ุฃู ุงูุฑุงุชุจ
4. ุงุญูุธ ุงูุชุนุฏููุงุช
5. **โ ุงููุชูุฌุฉ:** ุงูุจูุงูุงุช ูุญููุธุฉ ูู ุงูููู
6. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
7. **โ ุงููุชูุฌุฉ:** ุงูุชุนุฏููุงุช ูุง ุฒุงูุช ููุฌูุฏุฉ

### โ ุณููุงุฑูู 2: ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ

1. ุฃุถู ููุธู ุฌุฏูุฏ
2. **โ ุงููุชูุฌุฉ:** ููุญูุธ ูู ุงูููู ูุจุงุดุฑุฉ
3. ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ
4. **โ ุงููุชูุฌุฉ:** ุงูููุธู ุงูุฌุฏูุฏ ููุฌูุฏ

### โ ุณููุงุฑูู 3: ุญุฐู ููุธู

1. ุงุญุฐู ููุธู
2. **โ ุงููุชูุฌุฉ:** ููุญุฐู ูู ุงูููู
3. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
4. **โ ุงููุชูุฌุฉ:** ุงูููุธู ูุง ูุธูุฑ

### โ ุณููุงุฑูู 4: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ

1. ุนุฏูู ุจูุงูุงุช ูุชุนุฏุฏุฉ
2. ุฃููู ุงูุณูุฑูุฑ (Ctrl+C)
3. ุดุบูู ุงูุณูุฑูุฑ ูุฑุฉ ุฃุฎุฑู
4. **โ ุงููุชูุฌุฉ:** ุฌููุน ุงูุชุนุฏููุงุช ูุญููุธุฉ

---

## ๐ ุฑุณุงุฆู ุงูุณูุฑูุฑ

### ุนูุฏ ุจุฏุก ุงูุชุดุบูู ูุฃูู ูุฑุฉ:
```
๐ ูุง ููุฌุฏ ููู ุจูุงูุงุชุ ุณูุชู ุฅูุดุงุก ูุงุญุฏ ุฌุฏูุฏ
๐ฑ ุชุญููู ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ...
๐พ ุชู ุญูุธ ุงูุจูุงูุงุช ุจูุฌุงุญ
```

### ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู:
```
๐ ุชู ุชุญููู ุงูุจูุงูุงุช ูู ุงูููู
โ ุชู ุชุญููู ุงูุจูุงูุงุช ุงููุญููุธุฉ
โ ุงูุจูุงูุงุช ุงููุญููุธุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู
```

### ุนูุฏ ุฃู ุชุนุฏูู:
```
๐พ ุชู ุญูุธ ุงูุจูุงูุงุช ุจูุฌุงุญ
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

**ุนุฏุฏ ุงูุนูููุงุช ุงูุชู ุชุญูุธ ุงูุจูุงูุงุช:** 15 ุนูููุฉ

**ุงูููุช ุงููุชูุณุท ูุญูุธ ุงูุจูุงูุงุช:** < 10ms

**ุญุฌู ุงูููู ุงููููุฐุฌู:** 5-20 KB (ุญุณุจ ุนุฏุฏ ุงูููุธููู)

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ูููุน ุงูููู
```
apps/api/data/hr-database.json
```

### 2. ุงููุณุฎ ุงูุงุญุชูุงุทู
- ูููุตุญ ุจุนูู ูุณุฎ ุงุญุชูุงุทู ุฏูุฑู ูู ููู `hr-database.json`
- ูููู ูุณุฎู ุฅูู ููุงู ุขูู

### 3. ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช
- ูุงุณุชุนุงุฏุฉ ุจูุงูุงุช ูุฏููุฉุ ุถุน ููู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูู `apps/api/data/`
- ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ

### 4. ุฅุนุงุฏุฉ ุชุนููู ุงูุจูุงูุงุช
ูุญุฐู ุฌููุน ุงูุจูุงูุงุช ูุงูุจุฏุก ูู ุฌุฏูุฏ:
```bash
# ุงุญุฐู ุงูููู ูุฏููุงู
rm apps/api/data/hr-database.json

# ุฃู ูู ุงูููุฏ (ูู ุญุงูุงุช ุงูุงุฎุชุจุงุฑ ููุท)
storage.clearData();
```

---

## ๐ง ุงูุตูุงูุฉ

### ูุญุต ุงูุจูุงูุงุช
ููููู ูุชุญ ุงูููู ูุจุงุดุฑุฉ ููุญุต ุงูุจูุงูุงุช:
```bash
code apps/api/data/hr-database.json
```

### ุฅุตูุงุญ ููู ุชุงูู
ุฅุฐุง ุชูู ุงูููู:
1. ุงุญุฐู `hr-database.json`
2. ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ
3. ุณูุชู ุฅูุดุงุก ููู ุฌุฏูุฏ ุจุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ

---

## ๐ ุงููุฒุงูุง

โ **ุญูุธ ุชููุงุฆู:** ูุง ุญุงุฌุฉ ูุฒุฑ "ุญูุธ"
โ **ูุง ููุฏุงู ููุจูุงูุงุช:** ุญุชู ุจุนุฏ ุฅุบูุงู ุงูุณูุฑูุฑ
โ **ุณุฑูุน:** ุญูุธ ููุฑู ุจุนุฏ ูู ุนูููุฉ
โ **ุดูุงู:** JSON ูุงุจู ูููุฑุงุกุฉ
โ **ุขูู:** ูู ุชุนุฏูู ููุญูุธ ูุจุงุดุฑุฉ
โ **ูุงุจู ูููุณุฎ ุงูุงุญุชูุงุทู:** ููู ูุงุญุฏ ููุท

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุญู ุงููุดููุฉ ุจุงููุงูู! ุงูุขู:

1. โ ุฌููุน ุงูุชุนุฏููุงุช ุชูุญูุธ ุชููุงุฆูุงู
2. โ ูุง ููุฏุงู ููุจูุงูุงุช ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
3. โ ูุธุงู ุชุฎุฒูู ุฏุงุฆู ููุซูู
4. โ ุชุญููู ุณุฑูุน ููุจูุงูุงุช ุงููุญููุธุฉ
5. โ 15 ุนูููุฉ CRUD ุชุญูุธ ุงูุจูุงูุงุช ุชููุงุฆูุงู

**ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู!** ๐
